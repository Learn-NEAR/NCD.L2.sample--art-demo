{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"C:\\\\Users\\\\Oleksandr Sai\\\\source\\\\repos\\\\OlexandrSai\\\\near--art--demo\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\asyncToGenerator.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction exponentialBackoff(_x, _x2, _x3, _x4) {\n  return _exponentialBackoff.apply(this, arguments);\n}\n\nfunction _exponentialBackoff() {\n  _exponentialBackoff = _asyncToGenerator(function* (startWaitTime, retryNumber, waitBackoff, getResult) {\n    // TODO: jitter?\n    let waitTime = startWaitTime;\n\n    for (let i = 0; i < retryNumber; i++) {\n      const result = yield getResult();\n\n      if (result) {\n        return result;\n      }\n\n      yield sleep(waitTime);\n      waitTime *= waitBackoff;\n    }\n\n    return null;\n  });\n  return _exponentialBackoff.apply(this, arguments);\n}\n\nexports.default = exponentialBackoff; // Sleep given number of millis.\n\nfunction sleep(millis) {\n  return new Promise(resolve => setTimeout(resolve, millis));\n}","map":{"version":3,"sources":["C:/Users/Oleksandr Sai/source/repos/OlexandrSai/near--art--demo/node_modules/near-api-js/lib/utils/exponential-backoff.js"],"names":["Object","defineProperty","exports","value","exponentialBackoff","startWaitTime","retryNumber","waitBackoff","getResult","waitTime","i","result","sleep","default","millis","Promise","resolve","setTimeout"],"mappings":"AAAA;;;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;SACeC,kB;;;;;0CAAf,WAAkCC,aAAlC,EAAiDC,WAAjD,EAA8DC,WAA9D,EAA2EC,SAA3E,EAAsF;AAClF;AACA,QAAIC,QAAQ,GAAGJ,aAAf;;AACA,SAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,WAApB,EAAiCI,CAAC,EAAlC,EAAsC;AAClC,YAAMC,MAAM,SAASH,SAAS,EAA9B;;AACA,UAAIG,MAAJ,EAAY;AACR,eAAOA,MAAP;AACH;;AACD,YAAMC,KAAK,CAACH,QAAD,CAAX;AACAA,MAAAA,QAAQ,IAAIF,WAAZ;AACH;;AACD,WAAO,IAAP;AACH,G;;;;AACDL,OAAO,CAACW,OAAR,GAAkBT,kBAAlB,C,CACA;;AACA,SAASQ,KAAT,CAAeE,MAAf,EAAuB;AACnB,SAAO,IAAIC,OAAJ,CAAYC,OAAO,IAAIC,UAAU,CAACD,OAAD,EAAUF,MAAV,CAAjC,CAAP;AACH","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nasync function exponentialBackoff(startWaitTime, retryNumber, waitBackoff, getResult) {\n    // TODO: jitter?\n    let waitTime = startWaitTime;\n    for (let i = 0; i < retryNumber; i++) {\n        const result = await getResult();\n        if (result) {\n            return result;\n        }\n        await sleep(waitTime);\n        waitTime *= waitBackoff;\n    }\n    return null;\n}\nexports.default = exponentialBackoff;\n// Sleep given number of millis.\nfunction sleep(millis) {\n    return new Promise(resolve => setTimeout(resolve, millis));\n}\n"]},"metadata":{},"sourceType":"script"}