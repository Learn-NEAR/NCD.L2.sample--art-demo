{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"C:\\\\Users\\\\Oleksandr Sai\\\\source\\\\repos\\\\OlexandrSai\\\\near--art--demo\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\asyncToGenerator.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BrowserLocalStorageKeyStore = void 0;\n\nconst keystore_1 = require(\"./keystore\");\n\nconst key_pair_1 = require(\"../utils/key_pair\");\n\nconst LOCAL_STORAGE_KEY_PREFIX = 'near-api-js:keystore:';\n/**\n * This class is used to store keys in the browsers local storage.\n *\n * @example {@link https://docs.near.org/docs/develop/front-end/naj-quick-reference#key-store}\n * @example\n * ```js\n * import { connect, keyStores } from 'near-api-js';\n *\n * const keyStore = new keyStores.BrowserLocalStorageKeyStore();\n * const config = {\n *   keyStore, // instance of BrowserLocalStorageKeyStore\n *   networkId: 'testnet',\n *   nodeUrl: 'https://rpc.testnet.near.org',\n *   walletUrl: 'https://wallet.testnet.near.org',\n *   helperUrl: 'https://helper.testnet.near.org',\n *   explorerUrl: 'https://explorer.testnet.near.org'\n * };\n *\n * // inside an async function\n * const near = await connect(config)\n * ```\n */\n\nclass BrowserLocalStorageKeyStore extends keystore_1.KeyStore {\n  /**\n   * @param localStorage defaults to window.localStorage\n   * @param prefix defaults to `near-api-js:keystore:`\n   */\n  constructor(localStorage = window.localStorage, prefix = LOCAL_STORAGE_KEY_PREFIX) {\n    super();\n    this.localStorage = localStorage;\n    this.prefix = prefix;\n  }\n  /**\n   * Stores a {@link KeyPair} in local storage.\n   * @param networkId The targeted network. (ex. default, betanet, etc…)\n   * @param accountId The NEAR account tied to the key pair\n   * @param keyPair The key pair to store in local storage\n   */\n\n\n  setKey(networkId, accountId, keyPair) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.localStorage.setItem(_this.storageKeyForSecretKey(networkId, accountId), keyPair.toString());\n    })();\n  }\n  /**\n   * Gets a {@link KeyPair} from local storage\n   * @param networkId The targeted network. (ex. default, betanet, etc…)\n   * @param accountId The NEAR account tied to the key pair\n   * @returns {Promise<KeyPair>}\n   */\n\n\n  getKey(networkId, accountId) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const value = _this2.localStorage.getItem(_this2.storageKeyForSecretKey(networkId, accountId));\n\n      if (!value) {\n        return null;\n      }\n\n      return key_pair_1.KeyPair.fromString(value);\n    })();\n  }\n  /**\n   * Removes a {@link KeyPair} from local storage\n   * @param networkId The targeted network. (ex. default, betanet, etc…)\n   * @param accountId The NEAR account tied to the key pair\n   */\n\n\n  removeKey(networkId, accountId) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      _this3.localStorage.removeItem(_this3.storageKeyForSecretKey(networkId, accountId));\n    })();\n  }\n  /**\n   * Removes all items that start with `prefix` from local storage\n   */\n\n\n  clear() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      for (const key of _this4.storageKeys()) {\n        if (key.startsWith(_this4.prefix)) {\n          _this4.localStorage.removeItem(key);\n        }\n      }\n    })();\n  }\n  /**\n   * Get the network(s) from local storage\n   * @returns {Promise<string[]>}\n   */\n\n\n  getNetworks() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      const result = new Set();\n\n      for (const key of _this5.storageKeys()) {\n        if (key.startsWith(_this5.prefix)) {\n          const parts = key.substring(_this5.prefix.length).split(':');\n          result.add(parts[1]);\n        }\n      }\n\n      return Array.from(result.values());\n    })();\n  }\n  /**\n   * Gets the account(s) from local storage\n   * @param networkId The targeted network. (ex. default, betanet, etc…)\n   * @returns{Promise<string[]>}\n   */\n\n\n  getAccounts(networkId) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      const result = new Array();\n\n      for (const key of _this6.storageKeys()) {\n        if (key.startsWith(_this6.prefix)) {\n          const parts = key.substring(_this6.prefix.length).split(':');\n\n          if (parts[1] === networkId) {\n            result.push(parts[0]);\n          }\n        }\n      }\n\n      return result;\n    })();\n  }\n  /**\n   * @hidden\n   * Helper function to retrieve a local storage key\n   * @param networkId The targeted network. (ex. default, betanet, etc…)\n   * @param accountId The NEAR account tied to the storage keythat's sought\n   * @returns {string} An example might be: `near-api-js:keystore:near-friend:default`\n   */\n\n\n  storageKeyForSecretKey(networkId, accountId) {\n    return `${this.prefix}${accountId}:${networkId}`;\n  }\n  /** @hidden */\n\n\n  *storageKeys() {\n    for (let i = 0; i < this.localStorage.length; i++) {\n      yield this.localStorage.key(i);\n    }\n  }\n\n}\n\nexports.BrowserLocalStorageKeyStore = BrowserLocalStorageKeyStore;","map":{"version":3,"sources":["C:/Users/Oleksandr Sai/source/repos/OlexandrSai/near--art--demo/node_modules/near-api-js/lib/key_stores/browser_local_storage_key_store.js"],"names":["Object","defineProperty","exports","value","BrowserLocalStorageKeyStore","keystore_1","require","key_pair_1","LOCAL_STORAGE_KEY_PREFIX","KeyStore","constructor","localStorage","window","prefix","setKey","networkId","accountId","keyPair","setItem","storageKeyForSecretKey","toString","getKey","getItem","KeyPair","fromString","removeKey","removeItem","clear","key","storageKeys","startsWith","getNetworks","result","Set","parts","substring","length","split","add","Array","from","values","getAccounts","push","i"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BrowserLocalStorageKeyStore = void 0;\nconst keystore_1 = require(\"./keystore\");\nconst key_pair_1 = require(\"../utils/key_pair\");\nconst LOCAL_STORAGE_KEY_PREFIX = 'near-api-js:keystore:';\n/**\n * This class is used to store keys in the browsers local storage.\n *\n * @example {@link https://docs.near.org/docs/develop/front-end/naj-quick-reference#key-store}\n * @example\n * ```js\n * import { connect, keyStores } from 'near-api-js';\n *\n * const keyStore = new keyStores.BrowserLocalStorageKeyStore();\n * const config = {\n *   keyStore, // instance of BrowserLocalStorageKeyStore\n *   networkId: 'testnet',\n *   nodeUrl: 'https://rpc.testnet.near.org',\n *   walletUrl: 'https://wallet.testnet.near.org',\n *   helperUrl: 'https://helper.testnet.near.org',\n *   explorerUrl: 'https://explorer.testnet.near.org'\n * };\n *\n * // inside an async function\n * const near = await connect(config)\n * ```\n */\nclass BrowserLocalStorageKeyStore extends keystore_1.KeyStore {\n    /**\n     * @param localStorage defaults to window.localStorage\n     * @param prefix defaults to `near-api-js:keystore:`\n     */\n    constructor(localStorage = window.localStorage, prefix = LOCAL_STORAGE_KEY_PREFIX) {\n        super();\n        this.localStorage = localStorage;\n        this.prefix = prefix;\n    }\n    /**\n     * Stores a {@link KeyPair} in local storage.\n     * @param networkId The targeted network. (ex. default, betanet, etc…)\n     * @param accountId The NEAR account tied to the key pair\n     * @param keyPair The key pair to store in local storage\n     */\n    async setKey(networkId, accountId, keyPair) {\n        this.localStorage.setItem(this.storageKeyForSecretKey(networkId, accountId), keyPair.toString());\n    }\n    /**\n     * Gets a {@link KeyPair} from local storage\n     * @param networkId The targeted network. (ex. default, betanet, etc…)\n     * @param accountId The NEAR account tied to the key pair\n     * @returns {Promise<KeyPair>}\n     */\n    async getKey(networkId, accountId) {\n        const value = this.localStorage.getItem(this.storageKeyForSecretKey(networkId, accountId));\n        if (!value) {\n            return null;\n        }\n        return key_pair_1.KeyPair.fromString(value);\n    }\n    /**\n     * Removes a {@link KeyPair} from local storage\n     * @param networkId The targeted network. (ex. default, betanet, etc…)\n     * @param accountId The NEAR account tied to the key pair\n     */\n    async removeKey(networkId, accountId) {\n        this.localStorage.removeItem(this.storageKeyForSecretKey(networkId, accountId));\n    }\n    /**\n     * Removes all items that start with `prefix` from local storage\n     */\n    async clear() {\n        for (const key of this.storageKeys()) {\n            if (key.startsWith(this.prefix)) {\n                this.localStorage.removeItem(key);\n            }\n        }\n    }\n    /**\n     * Get the network(s) from local storage\n     * @returns {Promise<string[]>}\n     */\n    async getNetworks() {\n        const result = new Set();\n        for (const key of this.storageKeys()) {\n            if (key.startsWith(this.prefix)) {\n                const parts = key.substring(this.prefix.length).split(':');\n                result.add(parts[1]);\n            }\n        }\n        return Array.from(result.values());\n    }\n    /**\n     * Gets the account(s) from local storage\n     * @param networkId The targeted network. (ex. default, betanet, etc…)\n     * @returns{Promise<string[]>}\n     */\n    async getAccounts(networkId) {\n        const result = new Array();\n        for (const key of this.storageKeys()) {\n            if (key.startsWith(this.prefix)) {\n                const parts = key.substring(this.prefix.length).split(':');\n                if (parts[1] === networkId) {\n                    result.push(parts[0]);\n                }\n            }\n        }\n        return result;\n    }\n    /**\n     * @hidden\n     * Helper function to retrieve a local storage key\n     * @param networkId The targeted network. (ex. default, betanet, etc…)\n     * @param accountId The NEAR account tied to the storage keythat's sought\n     * @returns {string} An example might be: `near-api-js:keystore:near-friend:default`\n     */\n    storageKeyForSecretKey(networkId, accountId) {\n        return `${this.prefix}${accountId}:${networkId}`;\n    }\n    /** @hidden */\n    *storageKeys() {\n        for (let i = 0; i < this.localStorage.length; i++) {\n            yield this.localStorage.key(i);\n        }\n    }\n}\nexports.BrowserLocalStorageKeyStore = BrowserLocalStorageKeyStore;\n"]},"metadata":{},"sourceType":"script"}