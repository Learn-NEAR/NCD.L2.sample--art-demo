{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"C:\\\\Users\\\\Oleksandr Sai\\\\source\\\\repos\\\\OlexandrSai\\\\near--art--demo\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\asyncToGenerator.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InMemoryKeyStore = void 0;\n\nconst keystore_1 = require(\"./keystore\");\n\nconst key_pair_1 = require(\"../utils/key_pair\");\n/**\n * Simple in-memory keystore for mainly for testing purposes.\n *\n * @example {@link https://docs.near.org/docs/develop/front-end/naj-quick-reference#key-store}\n * @example\n * ```js\n * import { connect, keyStores, utils } from 'near-api-js';\n *\n * const privateKey = '.......';\n * const keyPair = utils.KeyPair.fromString(privateKey);\n *\n * const keyStore = new keyStores.InMemoryKeyStore();\n * keyStore.setKey('testnet', 'example-account.testnet', keyPair);\n *\n * const config = {\n *   keyStore, // instance of InMemoryKeyStore\n *   networkId: 'testnet',\n *   nodeUrl: 'https://rpc.testnet.near.org',\n *   walletUrl: 'https://wallet.testnet.near.org',\n *   helperUrl: 'https://helper.testnet.near.org',\n *   explorerUrl: 'https://explorer.testnet.near.org'\n * };\n *\n * // inside an async function\n * const near = await connect(config)\n * ```\n */\n\n\nclass InMemoryKeyStore extends keystore_1.KeyStore {\n  constructor() {\n    super();\n    this.keys = {};\n  }\n  /**\n   * Stores a {@KeyPair} in in-memory storage item\n   * @param networkId The targeted network. (ex. default, betanet, etc…)\n   * @param accountId The NEAR account tied to the key pair\n   * @param keyPair The key pair to store in local storage\n   */\n\n\n  setKey(networkId, accountId, keyPair) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.keys[`${accountId}:${networkId}`] = keyPair.toString();\n    })();\n  }\n  /**\n   * Gets a {@link KeyPair} from in-memory storage\n   * @param networkId The targeted network. (ex. default, betanet, etc…)\n   * @param accountId The NEAR account tied to the key pair\n   * @returns {Promise<KeyPair>}\n   */\n\n\n  getKey(networkId, accountId) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const value = _this2.keys[`${accountId}:${networkId}`];\n\n      if (!value) {\n        return null;\n      }\n\n      return key_pair_1.KeyPair.fromString(value);\n    })();\n  }\n  /**\n   * Removes a {@link KeyPair} from in-memory storage\n   * @param networkId The targeted network. (ex. default, betanet, etc…)\n   * @param accountId The NEAR account tied to the key pair\n   */\n\n\n  removeKey(networkId, accountId) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      delete _this3.keys[`${accountId}:${networkId}`];\n    })();\n  }\n  /**\n   * Removes all {@link KeyPairs} from in-memory storage\n   */\n\n\n  clear() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      _this4.keys = {};\n    })();\n  }\n  /**\n   * Get the network(s) from in-memory storage\n   * @returns {Promise<string[]>}\n   */\n\n\n  getNetworks() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      const result = new Set();\n      Object.keys(_this5.keys).forEach(key => {\n        const parts = key.split(':');\n        result.add(parts[1]);\n      });\n      return Array.from(result.values());\n    })();\n  }\n  /**\n   * Gets the account(s) from in-memory storage\n   * @param networkId The targeted network. (ex. default, betanet, etc…)\n   * @returns{Promise<string[]>}\n   */\n\n\n  getAccounts(networkId) {\n    var _this6 = this;\n\n    return _asyncToGenerator(function* () {\n      const result = new Array();\n      Object.keys(_this6.keys).forEach(key => {\n        const parts = key.split(':');\n\n        if (parts[parts.length - 1] === networkId) {\n          result.push(parts.slice(0, parts.length - 1).join(':'));\n        }\n      });\n      return result;\n    })();\n  }\n  /** @hidden */\n\n\n  toString() {\n    return 'InMemoryKeyStore';\n  }\n\n}\n\nexports.InMemoryKeyStore = InMemoryKeyStore;","map":{"version":3,"sources":["C:/Users/Oleksandr Sai/source/repos/OlexandrSai/near--art--demo/node_modules/near-api-js/lib/key_stores/in_memory_key_store.js"],"names":["Object","defineProperty","exports","value","InMemoryKeyStore","keystore_1","require","key_pair_1","KeyStore","constructor","keys","setKey","networkId","accountId","keyPair","toString","getKey","KeyPair","fromString","removeKey","clear","getNetworks","result","Set","forEach","key","parts","split","add","Array","from","values","getAccounts","length","push","slice","join"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InMemoryKeyStore = void 0;\nconst keystore_1 = require(\"./keystore\");\nconst key_pair_1 = require(\"../utils/key_pair\");\n/**\n * Simple in-memory keystore for mainly for testing purposes.\n *\n * @example {@link https://docs.near.org/docs/develop/front-end/naj-quick-reference#key-store}\n * @example\n * ```js\n * import { connect, keyStores, utils } from 'near-api-js';\n *\n * const privateKey = '.......';\n * const keyPair = utils.KeyPair.fromString(privateKey);\n *\n * const keyStore = new keyStores.InMemoryKeyStore();\n * keyStore.setKey('testnet', 'example-account.testnet', keyPair);\n *\n * const config = {\n *   keyStore, // instance of InMemoryKeyStore\n *   networkId: 'testnet',\n *   nodeUrl: 'https://rpc.testnet.near.org',\n *   walletUrl: 'https://wallet.testnet.near.org',\n *   helperUrl: 'https://helper.testnet.near.org',\n *   explorerUrl: 'https://explorer.testnet.near.org'\n * };\n *\n * // inside an async function\n * const near = await connect(config)\n * ```\n */\nclass InMemoryKeyStore extends keystore_1.KeyStore {\n    constructor() {\n        super();\n        this.keys = {};\n    }\n    /**\n     * Stores a {@KeyPair} in in-memory storage item\n     * @param networkId The targeted network. (ex. default, betanet, etc…)\n     * @param accountId The NEAR account tied to the key pair\n     * @param keyPair The key pair to store in local storage\n     */\n    async setKey(networkId, accountId, keyPair) {\n        this.keys[`${accountId}:${networkId}`] = keyPair.toString();\n    }\n    /**\n     * Gets a {@link KeyPair} from in-memory storage\n     * @param networkId The targeted network. (ex. default, betanet, etc…)\n     * @param accountId The NEAR account tied to the key pair\n     * @returns {Promise<KeyPair>}\n     */\n    async getKey(networkId, accountId) {\n        const value = this.keys[`${accountId}:${networkId}`];\n        if (!value) {\n            return null;\n        }\n        return key_pair_1.KeyPair.fromString(value);\n    }\n    /**\n     * Removes a {@link KeyPair} from in-memory storage\n     * @param networkId The targeted network. (ex. default, betanet, etc…)\n     * @param accountId The NEAR account tied to the key pair\n     */\n    async removeKey(networkId, accountId) {\n        delete this.keys[`${accountId}:${networkId}`];\n    }\n    /**\n     * Removes all {@link KeyPairs} from in-memory storage\n     */\n    async clear() {\n        this.keys = {};\n    }\n    /**\n     * Get the network(s) from in-memory storage\n     * @returns {Promise<string[]>}\n     */\n    async getNetworks() {\n        const result = new Set();\n        Object.keys(this.keys).forEach((key) => {\n            const parts = key.split(':');\n            result.add(parts[1]);\n        });\n        return Array.from(result.values());\n    }\n    /**\n     * Gets the account(s) from in-memory storage\n     * @param networkId The targeted network. (ex. default, betanet, etc…)\n     * @returns{Promise<string[]>}\n     */\n    async getAccounts(networkId) {\n        const result = new Array();\n        Object.keys(this.keys).forEach((key) => {\n            const parts = key.split(':');\n            if (parts[parts.length - 1] === networkId) {\n                result.push(parts.slice(0, parts.length - 1).join(':'));\n            }\n        });\n        return result;\n    }\n    /** @hidden */\n    toString() {\n        return 'InMemoryKeyStore';\n    }\n}\nexports.InMemoryKeyStore = InMemoryKeyStore;\n"]},"metadata":{},"sourceType":"script"}